<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <title>Курьеры</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <div th:insert="main :: head"></div>
</head>

<body>
<div th:insert="main :: nav-other"></div>
<div class="container text-center pt-lg-3">
    <h2>Управление курьерами</h2>
</div>
<hr/>
<div class="container text-center">
    <a th:href="@{/users/add}" type="button" class="btn btn-danger">Зарегистрировать курьера <strong>+</strong></a>
</div>
<hr/>
<div class="container-fluid text-center">
    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">Логин</th>
            <th scope="col">ФИО пользователя</th>
            <th scope="col">Номер телефона</th>
            <th scope="col">Электронная почта</th>
            <th scope="col">Статус</th>
            <th scope="col">Дата регистрации</th>
            <th scope="col">Дата изменения</th>
            <th scope="col">Прикреплённый филиал</th>
            <th scope="col">Управление</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="element : ${userList}">
            <td th:text="${element.username}"></td>
            <td th:text="${element.userFullName}"></td>
            <td th:text="${element.userPhoneNumber}"></td>
            <td th:text="${element.email}"></td>
            <td th:text="${element.status}"></td>
            <td th:text="${#dates.format(element.created,'dd-MM-yyyy')}"></td>
            <td th:text="${#dates.format(element.updated,'dd-MM-yyyy')}"></td>
            <td th:each="branch: ${element.branches}" th:text="${branch.name}"></td>
            <td>
                <div class="container d-flex flex-row bd-highlight justify-content-center">
                    <div class="row">
                        <div class="col-sm pe-0">
                            <a th:href="'/users/' + ${element.id} + '/edit'">
                                <b>
                                    <button class="btn btn-link btn-sm text-success" type="submit">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                             fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                                            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                                        </svg>
                                    </button>
                                </b>
                            </a>
                        </div>
                        <div th:if="${element.status == 'Активен'}" class="col-sm pe-0">
                            <form th:action="'/users/' + ${element.id} + '/block'" method="POST">
                                <b>
                                    <button class="btn btn-link btn-sm text-info" type="submit">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lock"
                                             fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd"
                                                  d="M11.5 8h-7a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1zm-7-1a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-7zm0-3a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
                                        </svg>
                                    </button>
                                </b>
                            </form>
                        </div>
                        <div th:if="${element.status == 'Забанен'}" class="col-sm pe-0">
                            <form th:action="'/users/' + ${element.id} + '/unblock'" method="POST">
                                <b>
                                    <button class="btn btn-link btn-sm text-info" type="submit">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-unlock"
                                             fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd"
                                                  d="M9.655 8H2.333c-.264 0-.398.068-.471.121a.73.73 0 0 0-.224.296 1.626 1.626 0 0 0-.138.59V14c0 .342.076.531.14.635.064.106.151.18.256.237a1.122 1.122 0 0 0 .436.127l.013.001h7.322c.264 0 .398-.068.471-.121a.73.73 0 0 0 .224-.296 1.627 1.627 0 0 0 .138-.59V9c0-.342-.076-.531-.14-.635a.658.658 0 0 0-.255-.237A1.122 1.122 0 0 0 9.655 8zm.012-1H2.333C.5 7 .5 9 .5 9v5c0 2 1.833 2 1.833 2h7.334c1.833 0 1.833-2 1.833-2V9c0-2-1.833-2-1.833-2zM8.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
                                        </svg>
                                    </button>
                                </b>
                            </form>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<hr>
<div class="alert alert-danger text-center" th:if="${userError == true}" th:text="${feedback}"></div>
<br>
<div th:insert="main :: footer"></div>
</body>
</html>